var nkomoLearningApp=angular.module("learn",["ngStorage","ngRoute","nkomo.controllers","nkomo.directives","nkomo.services","nkomo.rover"]),_appVersion="0.0.2",_isLocal="localhost"==window.location.hostname||window.location.hostname.match(/.*\.local$/i)||window.location.hostname.match(/.*\.vagrant$/i)?!0:!1,_assetVersion=_isLocal?Date.now():_appVersion;nkomoLearningApp.constant("appVersion",_appVersion).constant("isLocalEnvironment",_isLocal).constant("assetVersion",_assetVersion);var nkomoServices=angular.module("nkomo.services",["nkomo.rover"]),nkomoDirectives=angular.module("nkomo.directives",["nkomo.rover"]),nkomoControllers=angular.module("nkomo.controllers",["nkomo.rover"]);nkomoLearningApp.config(["$routeProvider","assetVersion",function(o,e){return o.when("/",{redirectTo:"/dict"}).when("/about",{templateUrl:"/views/about.html?"+e,controller:"PageController"}).when("/stats",{templateUrl:"/views/stats.html?"+e,controller:"PageController"}).when("/dict/:searchTerm?",{templateUrl:"/views/search.html?"+e,controller:"SearchController"}).when("/:langCode",{templateUrl:"/views/search.html?"+e,controller:"SearchController"}).when("/:langCode/define/:searchTerm",{templateUrl:"/views/definition.html?"+e,controller:"DefinitionController"}).when("/:langCode/poem/:searchTerm",{templateUrl:"/views/poem.html?"+e,controller:"DefinitionController"}).otherwise({redirectTo:"/dict"})}]).run(["$rootScope","$location","Rover",function(o,e,n){n.debug("Running app...")}]);
angular.module("nkomo.controllers").controller("ConfigController",["$scope",function(o){}]);
angular.module("nkomo.controllers").controller("DefinitionController",["$scope","$routeParams","DefinitionFactory","Rover",function(o,e,r,n){n.debug("DefinitionController"),o.searchTerm=e.searchTerm.replace("_"," "),o.langCode=e.langCode}]);
angular.module("nkomo.controllers").controller("MainController",["$scope","assetVersion",function(o,n){o.assetVersion=n}]);
angular.module("nkomo.controllers").controller("PageController",["$scope",function(o){}]);
angular.module("nkomo.controllers").controller("SearchController",["$scope","$routeParams","DefinitionFactory","Rover",function(e,r,n,o){o.debug("SearchController"),e.searchTerm=r.searchTerm?r.searchTerm.replace("_"," "):null,e.langCode=r.langCode,e.results=[],e.lookup=function(r,a){r=r||e.searchTerm,a=a||e.langCode,r.length<1||(o.debug('Looking up "'+r+'"...'),e.results=[],e.isSearching=!0,n.search(r,"word",a).then(function(r){e.isSearching=!1,e.results=r.data},function(r){o.debug("Error"),o.debug(r),e.isSearching=!1}))},e.clear=function(){e.results=[],e.searchTerm=""},e.url=function(e){if(!e||!e.type)return"#/dict";var r="#/dict",n=e.title.replace(" ","_");switch(e.type){case"word":r="#/"+e.mainLanguage.code+"/define/"+n}return r},r.searchTerm&&e.lookup()}]);
angular.module("nkomo.services").factory("DefinitionFactory",["$http",function(t){var n="http://api.dinkomo.vagrant/v0.1/";return{count:function(r){return r=r||"word",t.get(n+r+"/count")},search:function(r,o,e,a){e=e||"",o=o||"word";var u=n+o+"/search/"+r;return u+="?lang="+e,u+="&method=fulltext",t({method:"GET",url:u})}}}]);
angular.module("nkomo.rover",[]).service("Rover",["$window","$sessionStorage","$route","$location",function(o,n,t,i){this.timestamp=Date.now(),this.isLocal="localhost"==window.location.hostname||window.location.hostname.match(/.*\.local$/i)||window.location.hostname.match(/.*\.vagrant$/i)?!0:!1,this.debug=function(o){this.isLocal&&console&&console.log(o)}}]);
//# sourceMappingURL=learn.js.map