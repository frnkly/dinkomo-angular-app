{"version":3,"sources":["app.js","controllers/account.js","controllers/definition.js","controllers/main.js","controllers/page.js","controllers/search.js","services/account.js","services/definition.js","services/language.js","services/rover.js","services/search.js"],"names":["nkomoLearningApp","angular","module","_appVersion","_isLocal","window","location","hostname","match","_assetVersion","Date","now","_apiEndpoint","constant","nkomoServices","nkomoDirectives","nkomoControllers","config","$routeProvider","assetVersion","when","redirectTo","templateUrl","controller","otherwise","run","$rootScope","$location","Rover","debug","$scope","AccountService","path","hasToken","localAuth","authURIs","local","facebookAuth","facebook","googleAuth","google","linkedinAuth","linkedin","twitterAuth","twitter","setCredentials","$routeParams","$sessionStorage","LanguageService","DefinitionService","searchTerm","replace","langCode","language","languages","get","then","response","data","definitions","search","definitionForm","subType","saveDefinition","definition","title","alt_titles","altTitles","type","sub_type","translations","code","id","update","create","$localStorage","toggleNav","$","toggleClass","SearchFactory","results","lookup","length","lookupDefinition","lookupAnything","isSearching","any","clear","url","def","alias","mainLanguage","service","apiEndpoint","this","token","factory","$http","count","term","definitionType","searchMethod","endpoint","method","post","delete","$window","$route","timestamp","isLocal","msg","console","log","query"],"mappings":"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","file":"learn.js","sourcesContent":["/**\n * Main angular application.\n *\n */\nvar nkomoLearningApp = angular.module('learn', [\n    'ngStorage', 'ngRoute',\n    'nkomo.controllers', 'nkomo.directives', 'nkomo.services', 'nkomo.rover'\n]);\n\n//\n// App constants.\n//\n\nvar _appVersion = '0.1.0';\nvar _isLocal =\n    (window.location.hostname == 'localhost' ||\n        window.location.hostname.match(/.*\\.local$/i) ||\n        window.location.hostname.match(/.*\\.vagrant$/i)) ? true : false;\nvar _assetVersion = _isLocal ? Date.now() : _appVersion;\nvar _apiEndpoint = _isLocal ? 'http://api.dinkomo.vagrant/0.1' : 'http://dinkomo-api.frnk.ca/0.1';\n\nnkomoLearningApp.constant('appVersion', _appVersion)\n                .constant('isLocalEnvironment', _isLocal)\n                .constant('assetVersion', _assetVersion)\n                .constant('apiEndpoint', _apiEndpoint);\n\n//\n// Initialize modules so that we can use them from different files.\n//\n\nvar nkomoServices = angular.module('nkomo.services', ['nkomo.rover']);\nvar nkomoDirectives = angular.module('nkomo.directives', ['nkomo.rover']);\nvar nkomoControllers = angular.module('nkomo.controllers', ['nkomo.rover']);\n\n//\n// Configures the application.\n//\n\nnkomoLearningApp.config(['$routeProvider', 'assetVersion',\n    function($routeProvider, assetVersion) {\n\n        // Landing page.\n        return $routeProvider.when('/', {\n            redirectTo: '/dict'\n        })\n\n        // About page.\n        .when('/about', {\n\t\t\ttemplateUrl: '/views/about.html?' + assetVersion,\n            controller: 'PageController'\n\t\t})\n\n        // Settings page.\n        .when('/account', {\n\t\t\ttemplateUrl: '/views/account.html?' + assetVersion,\n            controller: 'AccountController'\n\t\t})\n\n        // Login form.\n        .when('/login', {\n\t\t\ttemplateUrl: '/views/login.html?' + assetVersion,\n            controller: 'AccountController'\n\t\t})\n\n        // Stats page.\n        .when('/stats', {\n\t\t\ttemplateUrl: '/views/stats.html?' + assetVersion,\n            controller: 'PageController'\n\t\t})\n\n        // Search pages.\n        .when('/dict/:searchTerm?', {\n\t\t\ttemplateUrl: '/views/search.html?' + assetVersion,\n            controller: 'SearchController'\n        })\n        .when('/:langCode', {\n\t\t\ttemplateUrl: '/views/search.html?' + assetVersion,\n            controller: 'SearchController'\n        })\n\n        // Dictionary pages.\n        .when('/:langCode/define/:searchTerm', {\n\t\t\ttemplateUrl: '/views/definition.html?' + assetVersion,\n            controller: 'DefinitionController'\n        })\n        .when('/:langCode/poem/:searchTerm', {\n\t\t\ttemplateUrl: '/views/poem.html?' + assetVersion,\n            controller: 'DefinitionController'\n        })\n        .when('/:langCode/add/word', {\n\t\t\ttemplateUrl: '/views/forms/add-word.html?' + assetVersion,\n            controller: 'DefinitionController'\n        })\n\n        // Else, redirect to search page.\n        .otherwise({\n\t\t\tredirectTo: '/dict'\n\t\t});\n    }\n])\n\n// Runs the application.\n.run(['$rootScope', '$location', 'Rover',\n    function ($rootScope, $location, Rover) {\n\n        Rover.debug('Running app...');\n\n    }\n]);\n","/**\r\n *\r\n */\r\nangular.module('nkomo.controllers')\r\n\r\n.controller('AccountController', ['$scope', '$location', 'AccountService',\r\n    function($scope, $location, AccountService) {\r\n\r\n        // Check that user is signed in.\r\n        if ($location.path() != '/login' && !AccountService.hasToken()) {\r\n            return AccountService.setCredentials();\r\n        }\r\n\r\n        // Authentication URIs.\r\n        $scope.localAuth    = AccountService.authURIs.local;\r\n        $scope.facebookAuth = AccountService.authURIs.facebook;\r\n        $scope.googleAuth   = AccountService.authURIs.google;\r\n        $scope.linkedinAuth = AccountService.authURIs.linkedin;\r\n        $scope.twitterAuth  = AccountService.authURIs.twitter;\r\n    }\r\n]);\r\n","/**\r\n *\r\n */\r\nangular.module('nkomo.controllers')\r\n\r\n.controller('DefinitionController', [\r\n    '$scope', '$routeParams', '$sessionStorage', '$location',\r\n    'LanguageService', 'DefinitionService', 'Rover',\r\n\r\n    function($scope, $routeParams, $sessionStorage, $location, LanguageService, DefinitionService, Rover) {\r\n\r\n        Rover.debug('DefinitionController');\r\n\r\n        // Search parameters.\r\n        $scope.searchTerm = $routeParams.searchTerm ? $routeParams.searchTerm.replace('_', ' ') : false;\r\n        $scope.langCode = $routeParams.langCode;\r\n\r\n        // Language data.\r\n        $scope.language = $sessionStorage.languages[$routeParams.langCode] || null;\r\n\r\n        if (!$scope.language)\r\n        {\r\n            Rover.debug('Retrieving language with code \"'+ $scope.langCode +'\"...');\r\n\r\n            LanguageService.get($scope.langCode).then(\r\n\r\n                // On success: Save the languge object in the $scope and the $sessionStorage.\r\n                function(response) {\r\n                    $scope.language = $sessionStorage.languages[$routeParams.langCode] = response.data;\r\n                },\r\n\r\n                // On error...\r\n                function(response) {\r\n                    Rover.debug('Could not retrieve language data.');\r\n                }\r\n            );\r\n        }\r\n\r\n        // Definition list.\r\n        if ($scope.searchTerm)\r\n        {\r\n            $scope.definitions = $sessionStorage.definitions[$routeParams.searchTerm] || null;\r\n\r\n            if (!$scope.definitions)\r\n            {\r\n                Rover.debug('Retrieving definitions for \"'+ $scope.searchTerm +'\"...');\r\n\r\n                DefinitionService.search($scope.searchTerm, 'word', $scope.langCode).then(\r\n                // DefinitionService.get($scope.searchTerm).then(\r\n\r\n                    // On success.\r\n                    function(response) {\r\n\r\n                        // Save the definition list locally and in the sessionStorage.\r\n                        $scope.definitions = $sessionStorage.definitions[$routeParams.searchTerm] = response.data;\r\n                    },\r\n\r\n                    // On error.\r\n                    function(response) {\r\n                        Rover.debug('Could not retrieve definitions.');\r\n                    }\r\n                );\r\n            }\r\n        }\r\n\r\n        // Saves a new or existing definition.\r\n        $scope.definitionForm = {subType: 'n'};\r\n        $scope.saveDefinition = function() {\r\n\r\n            Rover.debug('Saving definition...');\r\n\r\n            var definition = {\r\n                title: $scope.definitionForm.title,\r\n                alt_titles: $scope.definitionForm.altTitles || '',\r\n                type: 0,\r\n                sub_type: $scope.definitionForm.subType,\r\n                translations: $scope.definitionForm.translations,\r\n                languages: [$scope.language.code]\r\n            };\r\n\r\n            var save = $scope.definitionForm.id ? DefinitionService.update : DefinitionService.create;\r\n\r\n            // save(definition).then(\r\n            DefinitionService.create(definition).then(\r\n\r\n                // On success, browse to definition page.\r\n                function(response) {\r\n                    $location.path('/' + $scope.language.code + '/define/' + response.data.title.replace(' ', '_'));\r\n                },\r\n\r\n                // On error.\r\n                function(response) {\r\n                    Rover.debug('on error...');\r\n                    Rover.debug(response);\r\n                }\r\n            );\r\n        };\r\n    }\r\n]);\r\n","/**\r\n *\r\n */\r\nangular.module('nkomo.controllers')\r\n\r\n.controller('MainController', ['$scope', '$sessionStorage', '$localStorage', 'Rover', 'assetVersion',\r\n    function($scope, $sessionStorage, $localStorage, Rover, assetVersion) {\r\n\r\n        $scope.assetVersion = assetVersion;\r\n\r\n        // Globally available language and definition objects.\r\n        $sessionStorage.languages = $sessionStorage.languages || {};\r\n        $sessionStorage.definitions = $sessionStorage.definitions || {};\r\n\r\n        // Toggles navigation links.\r\n        $scope.toggleNav = function() {\r\n            // $('aside .toggles').toggleClass('hidden-xs');\r\n            $('aside .toggles').toggleClass('hidden-xs');\r\n        };\r\n\r\n    }\r\n]);\r\n","/**\r\n * \r\n */\r\nangular.module('nkomo.controllers')\r\n\r\n.controller('PageController', ['$scope',\r\n    function($scope) {\r\n\r\n    }\r\n]);\r\n","/**\r\n *\r\n */\r\nangular.module('nkomo.controllers')\r\n\r\n.controller('SearchController', [\r\n    '$scope', '$routeParams', '$sessionStorage',\r\n    'LanguageService', 'DefinitionService', 'SearchFactory', 'Rover',\r\n\r\n    function($scope, $routeParams, $sessionStorage, LanguageService, DefinitionService, SearchFactory, Rover) {\r\n\r\n        Rover.debug('SearchController');\r\n\r\n        // Search parameters.\r\n        $scope.searchTerm = $routeParams.searchTerm ? $routeParams.searchTerm.replace('_', ' ') : null;\r\n        $scope.langCode = $routeParams.langCode;\r\n\r\n        // Language data.\r\n        $scope.language = $routeParams.langCode ?\r\n            ($sessionStorage.languages[$routeParams.langCode] || null) : false;\r\n\r\n        if ($scope.language === null)\r\n        {\r\n            Rover.debug('Retrieving language with code \"'+ $scope.langCode +'\"...');\r\n\r\n            LanguageService.get($scope.langCode).then(\r\n\r\n                // On success.\r\n                function(response) {\r\n\r\n                    // Save the languge object in the $scope and the $sessionStorage.\r\n                    $scope.language = $sessionStorage.languages[$scope.langCode] = response.data;\r\n                },\r\n\r\n                // On error.\r\n                function(response) {\r\n                    Rover.debug('Could not retrieve language data.');\r\n                }\r\n            );\r\n        }\r\n\r\n        // Search results.\r\n        $scope.results = null;\r\n\r\n        // Queries the database.\r\n        $scope.lookup = function(searchTerm, langCode) {\r\n\r\n            // Default values.\r\n            searchTerm = searchTerm || $scope.searchTerm;\r\n            langCode = langCode || $scope.langCode;\r\n\r\n            // Performance check.\r\n            if (searchTerm.length < 1) {\r\n                return;\r\n            }\r\n\r\n            // Definition lookup.\r\n            if (langCode) {\r\n                $scope.lookupDefinition(searchTerm, langCode);\r\n            }\r\n\r\n            // General lookup.\r\n            else {\r\n                $scope.lookupAnything(searchTerm, langCode);\r\n            }\r\n        };\r\n        $scope.lookupDefinition = function(searchTerm, langCode) {\r\n\r\n            Rover.debug('Looking up definitions matching \"'+ searchTerm +'\"...');\r\n\r\n            // Notify user that we're querying the API.\r\n            $scope.results = [];\r\n            $scope.isSearching = true;\r\n\r\n            DefinitionService.search(searchTerm, 'word', langCode).then(\r\n\r\n                // On success.\r\n                function(response) {\r\n                    $scope.isSearching = false;\r\n                    $scope.results = response.data;\r\n                },\r\n\r\n                // On error.\r\n                function(response) {\r\n                    Rover.debug('Error');\r\n                    Rover.debug(response);\r\n                    $scope.isSearching = false;\r\n                }\r\n            );\r\n        };\r\n        $scope.lookupAnything = function(searchTerm, langCode) {\r\n\r\n            Rover.debug('Looking up anything matching \"'+ searchTerm +'\"...');\r\n\r\n            // Notify user that we're querying the API.\r\n            $scope.results = [];\r\n            $scope.isSearching = true;\r\n\r\n            SearchFactory.any(searchTerm).then(\r\n\r\n                // On success.\r\n                function(response) {\r\n                    $scope.isSearching = false;\r\n                    $scope.results = response.data;\r\n                },\r\n\r\n                // On error.\r\n                function(response) {\r\n                    Rover.debug('Error');\r\n                    Rover.debug(response);\r\n                    $scope.isSearching = false;\r\n                }\r\n            );\r\n        };\r\n\r\n        // Clears the search form.\r\n        $scope.clear = function()\r\n        {\r\n            $scope.results = null;\r\n            $scope.searchTerm = '';\r\n        };\r\n\r\n        // Generates the URL for a definition.\r\n        $scope.url = function(def)\r\n        {\r\n            // Performance check.\r\n            if (!def || !def.type) {\r\n                return '#/dict';\r\n            }\r\n\r\n            var url = '#/dict', alias = def.title.replace(' ', '_');\r\n\r\n            switch (def.type)\r\n            {\r\n                case 'word':\r\n                    url = '#/' + def.mainLanguage.code + '/define/' + alias;\r\n            }\r\n\r\n            return url;\r\n        };\r\n\r\n        // If a search term already exists, query the API.\r\n        if ($routeParams.searchTerm) {\r\n            $scope.lookup();\r\n        }\r\n    }\r\n]);\r\n","/**\r\n *\r\n */\r\nangular.module('nkomo.services')\r\n\r\n.service('AccountService', ['$location', 'Rover', 'apiEndpoint',\r\n    function($location, Rover, apiEndpoint) {\r\n\r\n        // Test...\r\n        this.token = false;\r\n\r\n        // Authentication URIs.\r\n        this.authURIs = {\r\n            local: apiEndpoint + '/auth/local',\r\n            facebook: apiEndpoint + '/auth/facebook',\r\n            google: apiEndpoint + '/auth/google',\r\n            linkedin: apiEndpoint + '/auth/linkedin',\r\n            twitter: apiEndpoint + '/auth/twitter'\r\n        };\r\n\r\n        this.hasToken = function() {\r\n            return false;\r\n        };\r\n\r\n        // Redirects user to login form.\r\n        this.setCredentials = function() {\r\n            $location.path('/login');\r\n        };\r\n    }\r\n]);\r\n","/**\r\n *\r\n */\r\nangular.module('nkomo.services')\r\n\r\n.factory('DefinitionService', ['$http', 'apiEndpoint', 'Rover',\r\n    function($http, apiEndpoint, Rover) {\r\n\r\n        return {\r\n\r\n            count: function(type) {\r\n\r\n                type = type || 'word';\r\n\r\n                return $http.get(apiEndpoint + '/' + type + '/count');\r\n            },\r\n\r\n            get: function(title) {\r\n                return $http.get(apiEndpoint + '/definition/exists/' + title);\r\n            },\r\n\r\n            search : function(term, definitionType, langCode, searchMethod) {\r\n\r\n                langCode = langCode || '';\r\n                definitionType = definitionType || 'word';\r\n                var endpoint = apiEndpoint + '/' + definitionType + '/search/' + term;\r\n\r\n                // Narrow search by language.\r\n                endpoint += '?lang=' + langCode;\r\n\r\n                // Specify search method.\r\n                endpoint += '&method=fulltext';\r\n\r\n    \t\t\treturn $http({method: 'GET', url: endpoint});\r\n    \t\t},\r\n\r\n            create: function(definition) {\r\n                return $http.post(apiEndpoint + '/definition', definition);\r\n            },\r\n\r\n            update: function(definition) {\r\n\r\n            },\r\n\r\n            delete: function(definition) {\r\n\r\n            }\r\n        };\r\n    }\r\n]);\r\n","/**\r\n *\r\n */\r\nangular.module('nkomo.services')\r\n\r\n.factory('LanguageService', ['$http', 'apiEndpoint',\r\n    function($http, apiEndpoint) {\r\n\r\n        return {\r\n\r\n            count: function() {\r\n                return $http.get(apiEndpoint + '/language/count');\r\n            },\r\n\r\n            get: function(langCode) {\r\n                return $http.get(apiEndpoint + '/language/' + langCode);\r\n            }\r\n        };\r\n    }\r\n]);\r\n","/**\r\n *\r\n */\r\nangular.module('nkomo.rover', [])\r\n\r\n.service('Rover', ['$window', '$sessionStorage', '$route', '$location',\r\n    function($window, $sessionStorage, $route, $location) {\r\n\r\n        // Dev variables.\r\n        this.timestamp = Date.now();\r\n        this.isLocal =\r\n            (window.location.hostname == 'localhost' ||\r\n                window.location.hostname.match(/.*\\.local$/i) ||\r\n                window.location.hostname.match(/.*\\.vagrant$/i)) ? true : false;\r\n\r\n        // Logs a message to the console.\r\n        this.debug = function(msg) {\r\n            if (this.isLocal && console) {\r\n                console.log(msg);\r\n            }\r\n        };\r\n    }\r\n]);\r\n","/**\r\n *\r\n */\r\nangular.module('nkomo.services')\r\n\r\n.factory('SearchFactory', ['$http', 'apiEndpoint',\r\n    function($http, apiEndpoint) {\r\n\r\n        return {\r\n\r\n            any : function(query) {\r\n                return $http.get(apiEndpoint + '/search/' + query + '?method=fulltext');\r\n    \t\t}\r\n        };\r\n    }\r\n]);\r\n"],"sourceRoot":"/source/"}